The basic brute force suffices, we just need to store all seen numbers in a set. To speed things up, we precompute small factorials.